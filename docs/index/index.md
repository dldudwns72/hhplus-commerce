# Index 란?

- Database 조회 성능을 향상 시키기 위해 특정 컬럼에 대해 미리 정렬 해놓는 구조
- Index 가 없다면 조건에 대해 조회를 진행하게 되면 전체를 조회하는 Full Scan 이 일어나게 되며 속도가 매우 느려지게 된다.

## 어떻게 Index 가 동작하는가?

- Index 가 없다면 1~100까지 조회를 하였을 떄 처음부터 끝까지 조회를 진행하게 되는데, 이떄 조회할 조건을 정렬 해놓은 상태에서 절반씩 조회 조건을 줄여가면 조회 횟수를 줄일 수 있다.
- 이떄 정렬해놓은 컬럼 사본을 index 이라 하고 B Tree 구조로 데이터를 정렬 해놓고 데이터를 찾아간다.
- 주로 B Tree, B+ Tree 자료구조를 이용하는데 B+ Tree 자료구조는 범위 검색에 더 용이하여 사용된다고 함

## Index 종류

### 단일 Index (Single Index)

- 1개의 컬럼만을 사용하여 구성된 Index
- 데이터의 중복도가 낮은 ( 카디널리티가 높은 ) 컬럼을 선택하여 성능을 높힐 수 있다.

### 복합 Index (Composite Index)

- 2개 이상의 컬럼으로 구성된 Index, 구성된 컬럼의 순서대로 정렬이 이뤄진다
    - 컬럼 순서에 따라 성능 차이가 많이나며, 선두 컬럼을 제일 활용하되 앞에 있는 컬럼들이 중복도가 낮은 경우 뒤에 중복도가 높은 컬럼이 들어왔을 경우 의미 없는 인덱스가 될 수 있다. 
     ( 불필요한 컬럼 추가 X)

### Unique Index

- 복합키의 한 종류이나 Unique Index 로 설정된 컬럼들은 중복이 될 수 없다.

### Index 사용 시 유의 사항

1. Index 컬럼의 값과 타입을 그대로 사용할것

``` sql
# X
where price > 10000 / 100 # 연산과 같은 작업이 있다면 우측으로 옮김
# O
where price * 100 > 10000  
```

2. Index 가 있는 컬럼에서 Like 검색 시 앞 부분은 일차하게 한 후 사용
``` sql
LIKE '%abc%' → 인덱스 사용 불가능 (앞에 %가 있으면 인덱스가 비효율적)
LIKE 'abc%' → 인덱스 사용 가능 (앞부분이 일치해야 인덱스 활용 가능)
```

## Index 설정 유의 사항

- Index 는 컬럼을 복사해서 정렬해 놓은것으로, 메모리 용량을 사용한다. (비용 발생) -> 의미 없는 Index 사용 금지
- 데이터가 변경될 떄 마다 Index 도 같이 정렬되어야 하므로 추가적인 연산이 발생하여 생성, 수정,삭제 작업에 성능 저하가 있을 수 있다.
- 데이터 수정 삭제 작업 시 성능 하락을 야기할 수 있으나 크게 신경쓰지 않아도됨


#### Covering Index
- Index 사용 후 조회 시 원본 데이터를 가져오는데, 행의 갯수, 합 등을 확인할 떄는 원본 ROW에 접근할 필요가 없이 그대로 반환 해주는 것  